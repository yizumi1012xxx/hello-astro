---
import Layout from "../../layouts/Layout.astro";

type Coffee = {
  id: string;
  title: string;
  description: string;
  image: string;
};

const response = await fetch("https://api.sampleapis.com/coffee/graphql", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    query: `
        {
            allHots {
                id
                title
                description
                image
            }
        }
        `,
  }),
});

const json = await response.json();
const coffeeList: Coffee[] = json.data.allHots;
---

<Layout title="Coffee list page.">
  <div>{coffeeList.length} coffees exists!</div>
  <ul>
    {
      coffeeList.map((coffee) => (
        <li>
          <a href={`/coffee/${coffee.id}`}>{coffee.title}</a>
          <div>{coffee.image}</div>
        </li>
      ))
    }
  </ul>
</Layout>
